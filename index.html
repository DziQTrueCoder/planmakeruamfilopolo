<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mój Harmonogram Zajęć i Listy Lektur</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
        body{font-family:'Inter',sans-serif;background-color:#f3f4f6;height:100vh;overflow-y:auto;padding:0;}
        *{border-radius:.5rem;}
        .schedule-item{position:relative;padding:.75rem;border-left:4px solid;box-shadow:0 2px 4px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.08);transition:all .2s ease-in-out;background-color:#fff;font-size:.875rem;z-index:1;box-sizing:border-box;margin-bottom:.75rem;width:calc(100% - 1rem);left:.5rem;}
        .schedule-item h4{font-size:1rem;font-weight:600;margin-bottom:.25rem;}
        .schedule-item p{font-size:.75rem;color:#4b5563;line-height:1.2;}
        .schedule-grid-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;min-height:300px;overflow-y:visible;padding-bottom:.5rem;flex-grow:1;}
        .day-column{position:relative;background-color:#f9fafb;padding:1rem;border-radius:.5rem;box-shadow:0 1px 3px rgba(0,0,0,.05);display:flex;flex-direction:column;}
        .timeline-container{position:relative;flex-grow:1;min-height:400px;overflow-y:auto;padding-top:.5rem;padding-right:.5rem;}
        .app-container{max-width:100%;height:auto;display:flex;flex-direction:column;padding:1rem;}
        #message-box{position:fixed;top:1rem;right:1rem;padding:.75rem 1rem;background-color:#4CAF50;color:#fff;border-radius:.5rem;box-shadow:0 4px 6px rgba(0,0,0,.1);z-index:1000;opacity:0;visibility:hidden;transition:opacity .3s ease-in-out,visibility .3s ease-in-out;font-size:.875rem;}
        #message-box.show{opacity:1;visibility:visible;}
        #message-box.error{background-color:#f44336;}
        .modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.6);display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;visibility:hidden;transition:opacity .3s ease-in-out,visibility .3s ease-in-out;}
        .modal-overlay.show{opacity:1;visibility:visible;}
        .modal-content{background-color:#fff;padding:1.5rem;border-radius:.75rem;box-shadow:0 10px 15px rgba(0,0,0,.2);max-width:90%;width:400px;}
        .modal-content h3{font-size:1.5rem;}
        .modal-content p{font-size:.875rem;}
        .modal-content button{padding:.5rem 1rem;font-size:.875rem;}
        #available-schedule-display .schedule-item{background-color:#e0f2f7;border:2px solid #0d6efd;box-shadow:0 3px 6px rgba(13,110,253,.2);cursor:pointer;transition:transform .2s ease,box-shadow .2s ease;}
        #available-schedule-display .schedule-item:hover{transform:translateY(-3px) scale(1.02);box-shadow:0 8px 16px rgba(13,110,253,.3);z-index:20;}
        #available-schedule-display h4{font-size:1.1rem;font-weight:700;color:#052c65;}
        #available-schedule-display p{font-size:.8rem;color:#343a40;}
        .reading-list-item{margin-bottom:.5rem;padding:.5rem;border-left:3px solid #6c757d;background-color:#f8f9fa;border-radius:.25rem;line-height:1.4;display:flex;justify-content:space-between;align-items:center;}
        .reading-list-item strong{color:#343a40;}
        .reading-list-item small{color:#6c757d;display:block;margin-top:.2rem;}
        .reading-list-header{background-color:#e9ecef;padding:.75rem 1.25rem;border-bottom:1px solid rgba(0,0,0,.125);border-top-left-radius:.25rem;border-top-right-radius:.25rem;margin-bottom:0;font-weight:600;font-size:1.1rem;cursor:pointer;}
        .reading-list-collapse{background-color:#fff;border:1px solid rgba(0,0,0,.125);border-top:none;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding:1.25rem;}
        .content-section{transition:opacity .3s ease-in-out;}
        .content-section.d-none{opacity:0;height:0;overflow:hidden;pointer-events:none;}
        #ects-counter{background-color:#fff;padding:1rem;margin-bottom:1.5rem;border-radius:.5rem;box-shadow:0 1px 3px rgba(0,0,0,.05);text-align:center;}
        @media (max-width:768px){.schedule-grid-container{grid-template-columns:1fr;height:auto;}.app-container{padding:.5rem;}h1{font-size:2rem;}h2{font-size:1.75rem;}}
    </style>
    <script>
        document.addEventListener('DOMContentLoaded',()=>{const availableScheduleDisplay=document.getElementById('available-schedule-display');const messageBox=document.getElementById('message-box');const conflictModal=document.getElementById('conflict-modal');const modalCancelButton=document.getElementById('modal-cancel');const modalReplaceButton=document.getElementById('modal-replace');const currentConflictTitle=document.getElementById('current-conflict-title');const newConflictTitle=document.getElementById('new-conflict-title');const generateHtmlButton=document.getElementById('generate-html-button');const generatePdfButton=document.getElementById('generate-pdf-button');const clearMyPlanButton=document.getElementById('clear-my-plan-button');const myScheduleSection=document.getElementById('my-schedule-section');const readingListSection=document.getElementById('reading-list-section');const showScheduleButton=document.getElementById('show-schedule-button');const showReadingListButton=document.getElementById('show-reading-list-button');const addMandatoryButton=document.getElementById('add-mandatory-button');const addAllToCalendarButton=document.getElementById('add-all-to-calendar-button');const ectsCounterDiv=document.getElementById('ects-counter');const courseDataMap={"Zarys historii Niderlandów":{hours:15,ects:3},"Językoznawstwo ogólne":{hours:30,ects:3},"Historia Wysp Brytyjskich":{hours:30,ects:4},"Historie teatru I":{hours:30,ects:3},"Dzieje literatury staropolskiej i Oświecenia":{hours:30,ects:3},"Historia filozofii":{hours:30,ects:3},"Historia literatury romantyzmu":{hours:30,ects:3},"Literatura i życie literackie po roku 1918":{hours:30,ects:3},"Literatura i kultura starożytnej Grecji":{hours:30,ects:3},"Nauka o współczesnym języku polskim: fonetyka, fonologia":{hours:30,ects:3},"Nauka o współczesnym języku polskim: składnia":{hours:30,ects:3},"Słowotwórstwo współczesnego języka polskiego":{hours:30,ects:3},"Teoria literatury":{hours:30,ects:3},"Wprowadzenie do historii literatury polskiej okresu pozytywizmu":{hours:30,ects:3},"Wstęp do literaturoznawstwa":{hours:30,ects:3},"Wykłady z historii Polski (966-1795)":{hours:30,ects:3},"Język łaciński z elementami kultury antycznej":{hours:30,ects:3},"Nauki pomocnicze":{hours:30,ects:2},"Historia literatury staropolskiej i oświecenia":{hours:30,ects:3},"Poetyka z analizą dzieła literackiego":{hours:30,ects:3},"Nauka o współczesnym języku polskim":{hours:30,ects:3},"Warsztat polonisty - pisanie":{hours:30,ects:3},"Mówienie - warsztat polonisty":{hours:30,ects:3},"Cywilizacje Azji. Literatura popularna przedwojennej Japonii":{hours:30,ects:3},"Konwersatorium z literatury powszechnej":{hours:30,ects:4},"Historia Skandynawii":{hours:30,ects:2},"Zarys literatur skandynawskich (Dania, Norwegia)":{hours:30,ects:2},"Podstawy tłumaczenia konferencyjnego":{hours:30,ects:2},"Visual Communication in Eastern European Cinema":{hours:30,ects:4},"Wstęp do socjolingwistyki":{hours:30,ects:3},"Rosja współczesna":{hours:30,ects:5},"Literatura, sztuka, społeczeństwo francuskie I (średniowiecze)":{hours:30,ects:3},"Współczesne życie literackie krajów frankofońskich":{hours:15,ects:2},"Historia Francji":{hours:30,ects:3},"Historia Półwyspu Iberyjskiego":{hours:30,ects:4},"Włochy współczesne":{hours:30,ects:5},"Współczesna literatura portugalska":{hours:30,ects:4},"Kultura Portugalii":{hours:30,ects:4},"Język i kultura Basków":{hours:60,ects:6},"Islam I":{hours:30,ects:3},"Sztuka arabsko-muzułmańska":{hours:30,ects:3},"Wstęp do nowogrecystyki":{hours:15,ects:1},"Statystyka":{hours:30,ects:3}};function applyCourseData(schedules){schedules.forEach(schedule=>{const titleKey=Object.keys(courseDataMap).find(key=>schedule.title.startsWith(key));if(titleKey){schedule.ects=courseDataMap[titleKey].ects;schedule.hours=courseDataMap[titleKey].hours;}});return schedules;}
            let availableSchedules=[];let mySchedules=[];let pendingConflictSchedule=null;const daysOfWeek=['Poniedziałek','Wtorek','Środa','Czwartek','Piątek'];function showMessage(message,type){messageBox.textContent=message;messageBox.className=`show ${type}`;setTimeout(()=>{messageBox.classList.remove('show');},3000);}
            function timeToMinutes(timeString){const[hours,minutes]=timeString.split(':').map(Number);return hours*60+minutes;}
            function checkConflict(newSchedule,targetSchedules){const newStart=timeToMinutes(newSchedule.time);const newEnd=timeToMinutes(newSchedule.endTime);const isDuplicate=targetSchedules.some(s=>s.title.split(' - ')[0]===newSchedule.title.split(' - ')[0]);if(isDuplicate){return true;}
                if(targetSchedules.filter(s=>s.title.includes('Ćwiczenia')).length>=7&&newSchedule.title.includes('Ćwiczenia')){showMessage('Nie możesz dodać więcej niż 7 ćwiczeń w tygodniu!','error');return true;}
                for(const existingSchedule of targetSchedules){if(existingSchedule.day===newSchedule.day){const existingStart=timeToMinutes(existingSchedule.time);const existingEnd=timeToMinutes(existingSchedule.endTime);if((newStart<existingEnd&&newEnd>existingStart)||(existingStart<newEnd&&existingEnd>newStart)){return existingSchedule;}}}
                return null;}
            function saveMySchedules(){localStorage.setItem('mySchedules',JSON.stringify(mySchedules));}
            function loadMySchedules(){const stored=localStorage.getItem('mySchedules');if(stored){mySchedules=JSON.parse(stored);}}
            function saveAvailableSchedules(){localStorage.setItem('availableSchedules',JSON.stringify(availableSchedules));}
            function loadAvailableSchedules(){const storedSchedules=localStorage.getItem('availableSchedules');if(storedSchedules){availableSchedules=JSON.parse(storedSchedules);applyCourseData(availableSchedules);}else{initializeDefaultSchedules();saveAvailableSchedules();}}
            function initializeDefaultSchedules(){let schedules=[{"id":"1","title":"Poetyka z analizą dzieła literackiego - Ćwiczenia","day":"Piątek","time":"08:00","endTime":"09:30","instructor":"Ewa Szkudlarek","group":"Grupa 1","color":"#B0E0E6","faculty":"Filologia Polska"},{"id":"2","title":"Poetyka z analizą dzieła literackiego - Ćwiczenia","day":"Piątek","time":"13:30","endTime":"15:00","instructor":"Ewa Szkudlarek","group":"Grupa 2","color":"#B0E0E6","faculty":"Filologia Polska"},{"id":"3","title":"Poetyka z analizą dzieła literackiego - Ćwiczenia","day":"Piątek","time":"09:45","endTime":"11:15","instructor":"Agnieszka Rydz","group":"Grupa 3","color":"#B0E0E6","faculty":"Filologia Polska"},{"id":"4","title":"Poetyka z analizą dzieła literackiego - Ćwiczenia","day":"Czwartek","time":"15:15","endTime":"16:45","instructor":"Joanna Maleszyńska","group":"Grupa 4","color":"#B0E0E6","faculty":"Filologia Polska"},{"id":"5","title":"Poetyka z analizą dzieła literackiego - Ćwiczenia","day":"Czwartek","time":"09:45","endTime":"11:15","instructor":"Jacek Nowakowski","group":"Grupa 5","color":"#B0E0E6","faculty":"Filologia Polska"},{"id":"6","title":"Poetyka z analizą dzieła literackiego - Ćwiczenia","day":"Czwartek","time":"11:30","endTime":"13:00","instructor":"Krzysztof Gajda","group":"Grupa 6","color":"#B0E0E6","faculty":"Filologia Polska"},{"id":"7","title":"Poetyka z analizą dzieła literackiego - Ćwiczenia","day":"Czwartek","time":"17:00","endTime":"18:30","instructor":"Magdalena Bednarek","group":"Grupa 7","color":"#B0E0E6","faculty":"Filologia Polska"},{"id":"8","title":"Poetyka z analizą dzieła literackiego - Ćwiczenia","day":"Czwartek","time":"08:00","endTime":"09:30","instructor":"Ewelina Bulewicz-Rewers","group":"Grupa 8","color":"#B0E0E6","faculty":"Filologia Polska"},{"id":"9","title":"Warsztat polonisty - pisanie - Ćwiczenia","day":"Wtorek","time":"13:30","endTime":"15:00","instructor":"Katarzyna Czarnecka","group":"Grupa 1","color":"#90EE90","faculty":"Filologia Polska"},{"id":"10","title":"Warsztat polonisty - pisanie - Ćwiczenia","day":"Środa","time":"15:15","endTime":"16:45","instructor":"Katarzyna Czarnecka","group":"Grupa 2","color":"#90EE90","faculty":"Filologia Polska"},{"id":"11","title":"Warsztat polonisty - pisanie - Ćwiczenia","day":"Wtorek","time":"11:30","endTime":"13:00","instructor":"Jarosław Liberek","group":"Grupa 3","color":"#90EE90","faculty":"Filologia Polska"},{"id":"12","title":"Warsztat polonisty - pisanie - Ćwiczenia","day":"Środa","time":"15:15","endTime":"16:45","instructor":"Jarosław Liberek","group":"Grupa 4","color":"#90EE90","faculty":"Filologia Polska"},{"id":"13","title":"Warsztat polonisty - pisanie - Ćwiczenia","day":"Wtorek","time":"09:45","endTime":"11:15","instructor":"Monika Błaszczak-Stachowiak","group":"Grupa 5","color":"#90EE90","faculty":"Filologia Polska"},{"id":"14","title":"Warsztat polonisty - pisanie - Ćwiczenia","day":"Wtorek","time":"15:15","endTime":"16:45","instructor":"Dorota Masłej","group":"Grupa 6","color":"#90EE90","faculty":"Filologia Polska"},{"id":"15","title":"Warsztat polonisty - pisanie - Ćwiczenia","day":"Wtorek","time":"17:00","endTime":"18:30","instructor":"Aleksandra Sikorska-Krystek","group":"Grupa 7","color":"#90EE90","faculty":"Filologia Polska"},{"id":"16","title":"Warsztat polonisty - pisanie - Ćwiczenia","day":"Wtorek","time":"08:00","endTime":"09:30","instructor":"Jagoda Kurnikowska","group":"Grupa 8","color":"#90EE90","faculty":"Filologia Polska"},{"id":"17","title":"Język łaciński z elementami kultury antycznej - Ćwiczenia","day":"Piątek","time":"11:30","endTime":"13:00","instructor":"Monika Szczot","group":"Grupa 1","color":"#FFB6C1","faculty":"Filologia Polska"},{"id":"18","title":"Język łaciński z elementami kultury antycznej - Ćwiczenia","day":"Piątek","time":"13:30","endTime":"15:00","instructor":"Monika Szczot","group":"Grupa 2","color":"#FFB6C1","faculty":"Filologia Polska"},{"id":"19","title":"Język łaciński z elementami kultury antycznej - Ćwiczenia","day":"Piątek","time":"09:45","endTime":"11:15","instructor":"Konrad Dominas","group":"Grupa 3","color":"#FFB6C1","faculty":"Filologia Polska"},{"id":"20","title":"Język łaciński z elementami kultury antycznej - Ćwiczenia","day":"Czwartek","time":"08:00","endTime":"09:30","instructor":"Katarzyna Kaniecka-Juszczak","group":"Grupa 4","color":"#FFB6C1","faculty":"Filologia Polska"},{"id":"21","title":"Język łaciński z elementami kultury antycznej - Ćwiczenia","day":"Czwartek","time":"09:45","endTime":"11:15","instructor":"Katarzyna Kaniecka-Juszczak","group":"Grupa 5","color":"#FFB6C1","faculty":"Filologia Polska"},{"id":"22","title":"Język łaciński z elementami kultury antycznej - Ćwiczenia","day":"Czwartek","time":"11:30","endTime":"13:00","instructor":"Katarzyna Kaniecka-Juszczak","group":"Grupa 6","color":"#FFB6C1","faculty":"Filologia Polska"},{"id":"23","title":"Język łaciński z elementami kultury antycznej - Ćwiczenia","day":"Czwartek","time":"18:45","endTime":"20:15","instructor":"Katarzyna Kaniecka-Juszczak","group":"Grupa 7","color":"#FFB6C1","faculty":"Filologia Polska"},{"id":"24","title":"Język łaciński z elementami kultury antycznej - Ćwiczenia","day":"Czwartek","time":"15:15","endTime":"16:45","instructor":"Marlena Puk","group":"Grupa 8","color":"#FFB6C1","faculty":"Filologia Polska"},{"id":"25","title":"Nauka o współczesnym języku polskim - Ćwiczenia","day":"Piątek","time":"08:00","endTime":"09:30","instructor":"Karolina Ruta-Korytowska","group":"Grupa 1","color":"#D8BFD8","faculty":"Filologia Polska"},{"id":"26","title":"Nauka o współczesnym języku polskim - Ćwiczenia","day":"Piątek","time":"11:30","endTime":"13:00","instructor":"Karolina Ruta-Korytowska","group":"Grupa 2","color":"#D8BFD8","faculty":"Filologia Polska"},{"id":"27","title":"Nauka o współczesnym języku polskim - Ćwiczenia","day":"Czwartek","time":"11:30","endTime":"13:00","instructor":"Małgorzata Rybka","group":"Grupa 3","color":"#D8BFD8","faculty":"Filologia Polska"},{"id":"28","title":"Nauka o współczesnym języku polskim - Ćwiczenia","day":"Czwartek","time":"13:30","endTime":"15:00","instructor":"Małgorzata Rybka","group":"Grupa 4","color":"#D8BFD8","faculty":"Filologia Polska"},{"id":"29","title":"Nauka o współczesnym języku polskim - Ćwiczenia","day":"Czwartek","time":"09:45","endTime":"11:15","instructor":"Marta Wrześniewska-Pietrzak","group":"Grupa 5","color":"#D8BFD8","faculty":"Filologia Polska"},{"id":"30","title":"Nauka o współczesnym języku polskim - Ćwiczenia","day":"Piątek","time":"09:45","endTime":"11:15","instructor":"Ewa Kaptur","group":"Grupa 6","color":"#D8BFD8","faculty":"Filologia Polska"},{"id":"31","title":"Nauka o współczesnym języku polskim - Ćwiczenia","day":"Czwartek","time":"17:00","endTime":"18:30","instructor":"Alicja Przybylska","group":"Grupa 7","color":"#D8BFD8","faculty":"Filologia Polska"},{"id":"32","title":"Nauka o współczesnym języku polskim - Ćwiczenia","day":"Czwartek","time":"08:00","endTime":"09:30","instructor":"Magdalena Socha","group":"Grupa 8","color":"#D8BFD8","faculty":"Filologia Polska"},{"id":"33","title":"Nauki pomocnicze - Ćwiczenia","day":"Środa","time":"08:00","endTime":"09:30","instructor":"Olga Ziółkowska","group":"Grupa 1","color":"#FFFACD","faculty":"Filologia Polska"},{"id":"34","title":"Nauki pomocnicze - Ćwiczenia","day":"Środa","time":"09:45","endTime":"11:15","instructor":"Olga Ziółkowska","group":"Grupa 2","color":"#FFFACD","faculty":"Filologia Polska"},{"id":"35","title":"Nauki pomocnicze - Ćwiczenia","day":"Środa","time":"11:30","endTime":"13:00","instructor":"Olga Ziółkowska","group":"Grupa 3","color":"#FFFACD","faculty":"Filologia Polska"},{"id":"36","title":"Nauki pomocnicze - Ćwiczenia","day":"Wtorek","time":"13:30","endTime":"15:00","instructor":"Marek Osiewicz","group":"Grupa 4","color":"#FFFACD","faculty":"Filologia Polska"},{"id":"37","title":"Nauki pomocnicze - Ćwiczenia","day":"Wtorek","time":"15:15","endTime":"16:45","instructor":"Marek Osiewicz","group":"Grupa 5","color":"#FFFACD","faculty":"Filologia Polska"},{"id":"38","title":"Nauki pomocnicze - Ćwiczenia","day":"Wtorek","time":"11:30","endTime":"13:00","instructor":"Katarzyna Krzak-Weiss","group":"Grupa 6","color":"#FFFACD","faculty":"Filologia Polska"},{"id":"39","title":"Nauki pomocnicze - Ćwiczenia","day":"Wtorek","time":"08:00","endTime":"09:30","instructor":"N/A","group":"Grupa 7","color":"#FFFACD","faculty":"Filologia Polska"},{"id":"40","title":"Nauki pomocnicze - Ćwiczenia","day":"Wtorek","time":"09:45","endTime":"11:15","instructor":"N/A","group":"Grupa 8","color":"#FFFACD","faculty":"Filologia Polska"},{"id":"41","title":"Mówienie - warsztat polonisty - Ćwiczenia","day":"Wtorek","time":"11:30","endTime":"13:00","instructor":"Joanna Smół","group":"Grupa 1","color":"#E6E6FA","faculty":"Filologia Polska"},{"id":"42","title":"Mówienie - warsztat polonisty - Ćwiczenia","day":"Wtorek","time":"13:30","endTime":"15:00","instructor":"Joanna Smół","group":"Grupa 2","color":"#E6E6FA","faculty":"Filologia Polska"},{"id":"43","title":"Mówienie - warsztat polonisty - Ćwiczenia","day":"Wtorek","time":"15:15","endTime":"16:45","instructor":"Justyna Kobus","group":"Grupa 3","color":"#E6E6FA","faculty":"Filologia Polska"},{"id":"44","title":"Mówienie - warsztat polonisty - Ćwiczenia","day":"Środa","time":"15:15","endTime":"16:45","instructor":"Justyna Kobus","group":"Grupa 4","color":"#E6E6FA","faculty":"Filologia Polska"},{"id":"45","title":"Mówienie - warsztat polonisty - Ćwiczenia","day":"Czwartek","time":"17:00","endTime":"18:30","instructor":"Błażej Osowski","group":"Grupa 5","color":"#E6E6FA","faculty":"Filologia Polska"},{"id":"46","title":"Mówienie - warsztat polonisty - Ćwiczenia","day":"Środa","time":"15:15","endTime":"16:45","instructor":"Ewa Kaptur","group":"Grupa 6","color":"#E6E6FA","faculty":"Filologia Polska"},{"id":"47","title":"Mówienie - warsztat polonisty - Ćwiczenia","day":"Wtorek","time":"09:45","endTime":"11:15","instructor":"Eliza Grzelak","group":"Grupa 7","color":"#E6E6FA","faculty":"Filologia Polska"},{"id":"48","title":"Mówienie - warsztat polonisty - Ćwiczenia","day":"Wtorek","time":"08:00","endTime":"09:30","instructor":"Przemysław Raczyk","group":"Grupa 8","color":"#E6E6FA","faculty":"Filologia Polska"},{"id":"49","title":"Historia literatury staropolskiej i oświecenia - Ćwiczenia","day":"Czwartek","time":"11:30","endTime":"13:00","instructor":"Grzegorz Raubo","group":"Grupa 1","color":"#ADD8E6","faculty":"Filologia Polska"},{"id":"50","title":"Historia literatury staropolskiej i oświecenia - Ćwiczenia","day":"Czwartek","time":"13:30","endTime":"15:00","instructor":"Grzegorz Raubo","group":"Grupa 2","color":"#ADD8E6","faculty":"Filologia Polska"},{"id":"51","title":"Historia literatury staropolskiej i oświecenia - Ćwiczenia","day":"Piątek","time":"09:45","endTime":"11:15","instructor":"Leszek Teusz","group":"Grupa 3","color":"#ADD8E6","faculty":"Filologia Polska"},{"id":"52","title":"Historia literatury staropolskiej i oświecenia - Ćwiczenia","day":"Piątek","time":"11:30","endTime":"13:00","instructor":"Leszek Teusz","group":"Grupa 4","color":"#ADD8E6","faculty":"Filologia Polska"},{"id":"53","title":"Historia literatury staropolskiej i oświecenia - Ćwiczenia","day":"Czwartek","time":"17:00","endTime":"18:30","instructor":"Maciej Parkitny","group":"Grupa 5","color":"#ADD8E6","faculty":"Filologia Polska"},{"id":"54","title":"Historia literatury staropolskiej i oświecenia - Ćwiczenia","day":"Czwartek","time":"18:45","endTime":"20:15","instructor":"Maciej Parkitny","group":"Grupa 6","color":"#ADD8E6","faculty":"Filologia Polska"},{"id":"55","title":"Historia literatury staropolskiej i oświecenia - Ćwiczenia","day":"Czwartek","time":"09:45","endTime":"11:15","instructor":"Katarzyna Meller","group":"Grupa 7","color":"#ADD8E6","faculty":"Filologia Polska"},{"id":"56","title":"Historia literatury staropolskiej i oświecenia - Ćwiczenia","day":"Czwartek","time":"08:00","endTime":"09:30","instructor":"Patrycja Bąkowska","group":"Grupa 8","color":"#ADD8E6","faculty":"Filologia Polska"},{"id":"57","title":"Zarys historii Niderlandów","day":"Czwartek","time":"15:00","endTime":"15:45","instructor":"Przemysław Paluszek","group":"Wykład","color":"#FFA07A","faculty":"Anglistyka"},{"id":"58","title":"Językoznawstwo ogólne","day":"Poniedziałek","time":"13:15","endTime":"14:45","instructor":"Karolina Krawczak-Glynn","group":"Wykład","color":"#FFA07A","faculty":"Anglistyka"},{"id":"59","title":"Historia Wysp Brytyjskich","day":"Poniedziałek","time":"16:45","endTime":"18:15","instructor":"Tomasz Skirecki","group":"Wykład","color":"#FFA07A","faculty":"Anglistyka"},{"id":"60","title":"Historie teatru I","day":"Środa","time":"15:00","endTime":"16:45","instructor":"Jacek Fabiszak","group":"Wykład","color":"#FFA07A","faculty":"Anglistyka"},{"id":"61","title":"Dzieje literatury staropolskiej i Oświecenia","day":"Środa","time":"17:00","endTime":"18:30","instructor":"Grzegorz Raubo","group":"Wykład","color":"#DDA0DD","faculty":"Filologia Polska i Klasyczna"},{"id":"62","title":"Historia filozofii","day":"Poniedziałek","time":"15:15","endTime":"16:45","instructor":"Sylwia Panek","group":"Wykład","color":"#DDA0DD","faculty":"Filologia Polska i Klasyczna"},{"id":"63","title":"Historia literatury romantyzmu","day":"Środa","time":"17:00","endTime":"18:30","instructor":"Jerzy Fiećko","group":"Wykład","color":"#DDA0DD","faculty":"Filologia Polska i Klasyczna"},{"id":"64","title":"Literatura i życie literackie po roku 1918","day":"Środa","time":"15:15","endTime":"16:45","instructor":"Sylwia Panek, Agnieszka Kwiatkowska","group":"Wykład","color":"#DDA0DD","faculty":"Filologia Polska i Klasyczna"},{"id":"65","title":"Literatura i kultura starożytnej Grecji","day":"Poniedziałek","time":"09:45","endTime":"11:15","instructor":"Krystyna Bartol","group":"Wykład","color":"#DDA0DD","faculty":"Filologia Polska i Klasyczna"},{"id":"66","title":"Nauka o współczesnym języku polskim: fonetyka, fonologia","day":"Poniedziałek","time":"13:30","endTime":"15:00","instructor":"Paweł Nowakowski","group":"Wykład","color":"#DDA0DD","faculty":"Filologia Polska i Klasyczna"},{"id":"67","title":"Nauka o współczesnym języku polskim: składnia","day":"Czwartek","time":"13:30","endTime":"15:00","instructor":"Romana Łapa","group":"Wykład","color":"#DDA0DD","faculty":"Filologia Polska i Klasyczna"},{"id":"68","title":"Słowotwórstwo współczesnego języka polskiego","day":"Czwartek","time":"18:45","endTime":"20:15","instructor":"Błażej Osowski","group":"Wykład","color":"#DDA0DD","faculty":"Filologia Polska i Klasyczna"},{"id":"69","title":"Teoria literatury","day":"Wtorek","time":"09:45","endTime":"11:15","instructor":"Michał Januszkiewicz","group":"Konwersatorium","color":"#DDA0DD","faculty":"Filologia Polska i Klasyczna"},{"id":"70","title":"Wprowadzenie do historii literatury polskiej okresu pozytywizmu","day":"Środa","time":"15:15","endTime":"16:45","instructor":"Marek Wedemann","group":"Konwersatorium","color":"#DDA0DD","faculty":"Filologia Polska i Klasyczna"},{"id":"71","title":"Wstęp do literaturoznawstwa","day":"Środa","time":"09:45","endTime":"11:15","instructor":"Beata Przymuszała","group":"Wykład","color":"#DDA0DD","faculty":"Filologia Polska i Klasyczna"},{"id":"72","title":"Wykłady z historii Polski (966-1795)","day":"Poniedziałek","time":"17:00","endTime":"18:30","instructor":"Wojciech Sajkowski","group":"Wykład","color":"#DDA0DD","faculty":"Filologia Polska i Klasyczna"},{"id":"73","title":"Cywilizacje Azji. Literatura popularna przedwojennej Japonii","day":"Czwartek","time":"11:30","endTime":"13:00","instructor":"Andrzej Świrkowski","group":"Konwersatorium","color":"#F0E68C","faculty":"Neofilologia"},{"id":"74","title":"Konwersatorium z literatury powszechnej","day":"Wtorek","time":"08:00","endTime":"09:30","instructor":"Arkadiusz Żychliński","group":"Wykład","color":"#F0E68C","faculty":"Neofilologia"},{"id":"75","title":"Historia Skandynawii","day":"Środa","time":"11:30","endTime":"13:00","instructor":"Sylwia Izabela Schab, Magdalena Żmuda-Trzebiatowska, Tadeusz Wojciech Lange","group":"Konwersatorium","color":"#F0E68C","faculty":"Neofilologia"},{"id":"76","title":"Zarys literatur skandynawskich (Dania, Norwegia)","day":"Wtorek","time":"09:45","endTime":"11:15","instructor":"Sylwia Izabela Schab, Aleksandra Wilkus","group":"Konwersatorium","color":"#F0E68C","faculty":"Neofilologia"},{"id":"77","title":"Podstawy tłumaczenia konferencyjnego","day":"Poniedziałek","time":"15:00","endTime":"16:30","instructor":"Hanka Błaszkowska","group":"Wykład","color":"#F0E68C","faculty":"Neofilologia"},{"id":"78","title":"Visual Communication in Eastern European Cinema","day":"Piątek","time":"15:00","endTime":"16:30","instructor":"Beata Waligórska-Olejniczak","group":"Wykład","color":"#F0E68C","faculty":"Neofilologia"},{"id":"79","title":"Wstęp do socjolingwistyki","day":"Piątek","time":"11:30","endTime":"13:00","instructor":"Zofia Szwed","group":"Konwersatorium","color":"#F0E68C","faculty":"Neofilologia"},{"id":"80","title":"Rosja współczesna","day":"Wtorek","time":"15:00","endTime":"16:30","instructor":"Antoni Bortnowski","group":"Konwersatorium","color":"#F0E68C","faculty":"Neofilologia"},{"id":"81","title":"Literatura, sztuka, społeczeństwo francuskie I (średniowiecze)","day":"Wtorek","time":"16:45","endTime":"18:15","instructor":"Marta Sukiennicka","group":"Konwersatorium","color":"#F0E68C","faculty":"Neofilologia"},{"id":"82","title":"Współczesne życie literackie krajów frankofońskich","day":"Wtorek","time":"09:45","endTime":"11:15","instructor":"Jędrzej Pawlicki","group":"Konwersatorium","color":"#F0E68C","faculty":"Neofilologia"},{"id":"83","title":"Historia Francji","day":"Środa","time":"09:45","endTime":"11:15","instructor":"Jędrzej Pawlicki","group":"Konwersatorium","color":"#F0E68C","faculty":"Neofilologia"},{"id":"84","title":"Historia Francji","day":"Środa","time":"11:30","endTime":"13:00","instructor":"Jędrzej Pawlicki","group":"Konwersatorium (grupa 2)","color":"#F0E68C","faculty":"Neofilologia"},{"id":"85","title":"Historia Półwyspu Iberyjskiego","day":"Piątek","time":"08:00","endTime":"09:30","instructor":"Alfons Gregori","group":"Konwersatorium","color":"#F0E68C","faculty":"Neofilologia"},{"id":"86","title":"Włochy współczesne","day":"Czwartek","time":"08:00","endTime":"09:30","instructor":"Wawrzyniec Kryza","group":"Wykład","color":"#F0E68C","faculty":"Neofilologia"},{"id":"87","title":"Współczesna literatura portugalska","day":"Środa","time":"16:45","endTime":"18:15","instructor":"Wojciech Charchalis","group":"Konwersatorium","color":"#F0E68C","faculty":"Neofilologia"},{"id":"88","title":"Kultura Portugalii","day":"Środa","time":"18:30","endTime":"20:00","instructor":"Wojciech Charchalis","group":"Konwersatorium","color":"#F0E68C","faculty":"Neofilologia"},{"id":"89","title":"Język i kultura Basków","day":"Poniedziałek","time":"13:15","endTime":"15:00","instructor":"Leire Lazcano Zapatera","group":"Konwersatorium (część 1)","color":"#F0E68C","faculty":"Neofilologia"},{"id":"90","title":"Język i kultura Basków","day":"Czwartek","time":"15:00","endTime":"16:30","instructor":"Leire Lazcano Zapatera","group":"Konwersatorium (część 2)","color":"#F0E68C","faculty":"Neofilologia"},{"id":"91","title":"Islam I","day":"Środa","time":"13:30","endTime":"15:00","instructor":"Łukasz Piątak","group":"Wykład","color":"#F0E68C","faculty":"Neofilologia"},{"id":"92","title":"Sztuka arabsko-muzułmańska","day":"Czwartek","time":"09:45","endTime":"11:15","instructor":"Łukasz Piątak","group":"Wykład","color":"#F0E68C","faculty":"Neofilologia"},{"id":"93","title":"Wstęp do nowogrecystyki","day":"Wtorek","time":"09:45","endTime":"11:15","instructor":"Karolina Gortych-Michalak","group":"Wykład","color":"#F0E68C","faculty":"Neofilologia"},{"id":"94","title":"Statystyka","day":"Poniedziałek","time":"13:15","endTime":"16:30","instructor":"Victoria Kamasa","group":"Wykład (z przerwą 14:45-15:00)","color":"#F0E68C            function createScheduleItem(schedule, isAvailable = false) {
                const item = document.createElement('div');
                item.className = 'schedule-item';
                item.style.borderLeftColor = schedule.color || '#ddd';
                if (isAvailable) {item.addEventListener('click', () => addToMySchedule(schedule));}
                let typeLabel = '';
                const titleLower = schedule.title.toLowerCase();
                const groupLower = schedule.group.toLowerCase();
                const isPolishPhil = schedule.faculty.includes('Filologia Polska');
                const isPolishClassicalPhil = schedule.faculty.includes('Filologia Polska i Klasyczna');
                const isMandatoryLecture = titleLower.includes('historia filozofii') || titleLower.includes('wykłady z historii polski');
                if (isMandatoryLecture) {
                    typeLabel = '<span class="badge bg-secondary ms-2 align-middle">Obowiązkowe / Fakultatywne</span>';
                } else if (isPolishPhil && titleLower.includes('ćwiczenia')) {
                    typeLabel = '<span class="badge bg-primary ms-2 align-middle">Obowiązkowe (Ćwiczenia)</span>';
                } else if (isPolishPhil && (titleLower.includes('konwersatorium') || groupLower.includes('konwersatorium'))) {
                    typeLabel = '<span class="badge bg-info text-dark ms-2 align-middle">Fakultatywne (Konwersatorium)</span>';
                } else if (isPolishPhil) {
                    typeLabel = '<span class="badge bg-info text-dark ms-2 align-middle">Fakultatywne (Wykład)</span>';
                } else if (isPolishClassicalPhil && (titleLower.includes('konwersatorium') || groupLower.includes('konwersatorium'))) {
                    typeLabel = '<span class="badge bg-secondary ms-2 align-middle">Obowiązkowe / Fakultatywne (Konwersatorium)</span>';
                } else if (isPolishClassicalPhil) {
                    typeLabel = '<span class="badge bg-secondary ms-2 align-middle">Obowiązkowe (Wykład)</span>';
                } else if (titleLower.includes('konwersatorium') || groupLower.includes('konwersatorium')) {
                    typeLabel = '<span class="badge bg-info text-dark ms-2 align-middle">Fakultatywne (Konwersatorium)</span>';
                } else if (titleLower.includes('wykład') || groupLower.includes('wykład')) {
                    typeLabel = '<span class="badge bg-info text-dark ms-2 align-middle">Fakultatywne (Wykład)</span>';
                }
                const removeButton = !isAvailable ? `<button class="btn btn-danger btn-sm mt-2" onclick="removeFromMySchedule('${schedule.id}')">Usuń</button>` : '';
                item.innerHTML = `<h4>${schedule.title}${typeLabel}</h4><p><strong>Godzina:</strong> ${schedule.time} - ${schedule.endTime}</p><p><strong>Prowadzący:</strong> ${schedule.instructor}</p><p><strong>Grupa:</strong> ${schedule.group}</p>${schedule.hours?`<p><strong>Godziny:</strong> ${schedule.hours}h</p>`:''}${schedule.ects?`<p><strong>ECTS:</strong> ${schedule.ects}</p>`:''}${schedule.faculty?`<p><strong>Wydział:</strong> ${schedule.faculty}</p>`:''}${removeButton}`;return item;}
            function renderSchedules(schedules,container,isAvailable){container.innerHTML='';const schedulesByDay={};daysOfWeek.forEach(day=>{schedulesByDay[day]=schedules.filter(s=>s.day===day);});daysOfWeek.forEach(day=>{const dayColumn=document.createElement('div');dayColumn.className='day-column';dayColumn.innerHTML=`<h3>${day}</h3>`;const timelineContainer=document.createElement('div');timelineContainer.className='timeline-container';timelineContainer.dataset.day=day;schedulesByDay[day].sort((a,b)=>timeToMinutes(a.time)-timeToMinutes(b.time)).forEach(schedule=>{const scheduleItem=createScheduleItem(schedule,isAvailable);timelineContainer.appendChild(scheduleItem);});dayColumn.appendChild(timelineContainer);container.appendChild(dayColumn);});}
            function renderAvailable(){if(availableScheduleDisplay){renderSchedules(availableSchedules,availableScheduleDisplay,true);}}
            function renderMy(){const myScheduleContainer=document.querySelector('#my-schedule-section .schedule-grid-container');myScheduleContainer.innerHTML='';const schedulesByDay={};daysOfWeek.forEach(day=>{schedulesByDay[day]=mySchedules.filter(s=>s.day===day);});daysOfWeek.forEach(day=>{const dayColumn=document.createElement('div');dayColumn.className='day-column';dayColumn.innerHTML=`<h3>${day}</h3>`;const timelineContainer=document.createElement('div');timelineContainer.className='timeline-container';timelineContainer.dataset.day=day;schedulesByDay[day].sort((a,b)=>timeToMinutes(a.time)-timeToMinutes(b.time)).forEach(schedule=>{const scheduleItem=createScheduleItem(schedule,false);timelineContainer.appendChild(scheduleItem);});dayColumn.appendChild(timelineContainer);myScheduleContainer.appendChild(dayColumn);});updateEctsCounter();}
            function updateEctsCounter(){let kursoweHours=0;let fakultatywneEcts=0;let cwiczeniaEcts=0;let fakultatywneKonwersatoriaCount=0;const countedCourses=new Set();const obligatoryECTSCourses=["Poetyka z analizą dzieła literackiego", "Warsztat polonisty - pisanie", "Język łaciński z elementami kultury antycznej", "Nauka o współczesnym języku polskim", "Nauki pomocnicze", "Mówienie - warsztat polonisty", "Historia literatury staropolskiej i oświecenia"];const mandatoryLectures = [];mySchedules.forEach(s=>{const courseName=s.title.split(' - ')[0].trim();if(countedCourses.has(courseName)){return;}
                if(s.title.includes('Ćwiczenia')){cwiczeniaEcts+=s.ects||0;countedCourses.add(courseName);} else if (mandatoryLectures.includes(courseName)) {kursoweHours += s.hours || 0;countedCourses.add(courseName);} else {fakultatywneEcts+=s.ects||0;if(s.group.toLowerCase().includes('konwersatorium') || s.title.toLowerCase().includes('konwersatorium')){fakultatywneKonwersatoriaCount++;}
                    countedCourses.add(courseName);}});ectsCounterDiv.innerHTML=`<h5>Postęp w realizacji programu:</h5><p><strong>Obowiązkowe ćwiczenia:</strong> ${cwiczeniaEcts} / 19 ECTS</p><p><strong>Wykłady kursowe:</strong> ${kursoweHours} / 60h</p><p><strong>Zajęcia fakultatywne (w tym konwersatoria):</strong> ${fakultatywneEcts} / 9 ECTS</p><p><strong>Wybrane konwersatoria fakultatywne:</strong> ${fakultatywneKonwersatoriaCount} / 2</p>`;}
            function addToMySchedule(schedule,fromButton=false){const conflict=checkConflict(schedule,mySchedules);if(conflict===true){if(!fromButton)showMessage(`Przedmiot "${schedule.title.split(' - ')[0]}" już znajduje się w Twoim planie!`,'error');return;}
                if(conflict){pendingConflictSchedule=schedule;showConflictModal(conflict,schedule);return;}
                mySchedules.push({...schedule,id:schedule.id+'-'+Date.now()});saveMySchedules();renderMy();if(!fromButton)showMessage('Zajęcie zostało dodane do Twojego planu!','success');}
            function removeFromMySchedule(scheduleId){mySchedules=mySchedules.filter(s=>s.id!==scheduleId);saveMySchedules();renderMy();showMessage('Zajęcie zostało usunięte z Twojego planu!','success');}
            window.removeFromMySchedule=removeFromMySchedule;function showConflictModal(existingSchedule,newSchedule){if(currentConflictTitle&&newConflictTitle){currentConflictTitle.textContent=existingSchedule.title;newConflictTitle.textContent=newSchedule.title;conflictModal.classList.add('show');}}
            function clearMyPlan(){if(confirm('Czy na pewno chcesz wyczyścić cały plan?')){mySchedules=[];saveMySchedules();renderMy();showMessage('Plan został wyczyszczony!','success');}}
            function generateImage(){const scheduleContainer=document.querySelector('#my-schedule-section .schedule-grid-container');if(!scheduleContainer)return;showMessage('Rozpoczynam generowanie obrazu...','success');html2canvas(scheduleContainer,{backgroundColor:'#f3f4f6',scale:2,useCORS:true,windowWidth:scheduleContainer.scrollWidth,windowHeight:scheduleContainer.scrollHeight}).then(canvas=>{const link=document.createElement('a');link.download='harmonogram-zajec.png';link.href=canvas.toDataURL();link.click();showMessage('Obraz został pobrany!','success');}).catch(err=>{console.error('Błąd podczas generowania obrazu:',err);showMessage('Wystąpił błąd podczas generowania obrazu.','error');});}
            function addAllToCalendar(){if(mySchedules.length===0){showMessage('Twój plan jest pusty!','error');return;}
                const getNextDayOfWeek=(dayName,date)=>{const dayMap={'Poniedziałek':1,'Wtorek':2,'Środa':3,'Czwartek':4,'Piątek':5};const targetDay=dayMap[dayName];const currentDay=date.getDay();const newDate=new Date(date.getTime());newDate.setDate(date.getDate()+(targetDay+7-currentDay)%7);return newDate;};const formatDate=(date,time)=>{const[hours,minutes]=time.split(':');const d=new Date(date);d.setHours(hours,minutes,0,0);return d.toISOString().replace(/[-:]/g,'').split('.')[0];};let icsEvents=[];const today=new Date();mySchedules.forEach(schedule=>{const eventDate=getNextDayOfWeek(schedule.day,today);const startDate=formatDate(eventDate,schedule.time);const endDate=formatDate(eventDate,schedule.endTime);icsEvents.push(['BEGIN:VEVENT',`DTSTART;TZID=Europe/Warsaw:${startDate}`,`DTEND;TZID=Europe/Warsaw:${endDate}`,'RRULE:FREQ=WEEKLY;UNTIL=20250214T235959Z',`SUMMARY:${schedule.title}`,`DESCRIPTION:Prowadzący: ${schedule.instructor}\\nGrupa: ${schedule.group}\\nWydział: ${schedule.faculty}`,'END:VEVENT'].join('\n'));});const icsContent=['BEGIN:VCALENDAR','VERSION:2.0',...icsEvents,'END:VCALENDAR'].join('\n');const blob=new Blob([icsContent],{type:'text/calendar;charset=utf-8'});const link=document.createElement('a');link.href=URL.createObjectURL(blob);link.download=`plan-zajec.ics`;link.click();URL.revokeObjectURL(link.href);}
            function generatePdf(){const{jsPDF}=window.jspdf;const pdf=new jsPDF('p','mm','a4');const pageMargin=20;const pageHeight=pdf.internal.pageSize.height;const pageWidth=pdf.internal.pageSize.width;const lineHeight=7;let yPosition=pageMargin;pdf.setFont("helvetica");pdf.setFontSize(16);pdf.text("Mój Plan Zajęć",pageMargin,yPosition);yPosition+=lineHeight*2;const sortedSchedules=[...mySchedules].sort((a,b)=>{const dayA=daysOfWeek.indexOf(a.day);const dayB=daysOfWeek.indexOf(b.day);if(dayA!==dayB)return dayA-dayB;return timeToMinutes(a.time)-timeToMinutes(b.time);});sortedSchedules.forEach(schedule=>{let blockHeight=lineHeight*3;if(schedule.hours)blockHeight+=(lineHeight-2);if(schedule.ects)blockHeight+=(lineHeight-2);if(schedule.faculty)blockHeight+=(lineHeight-2);const titleLines=pdf.splitTextToSize(schedule.title,pageWidth-pageMargin*2);blockHeight+=(titleLines.length*(lineHeight-2));if(yPosition+blockHeight>pageHeight-pageMargin){pdf.addPage();yPosition=pageMargin;}
                pdf.setFontSize(12);pdf.setFont("helvetica","bold");pdf.text(titleLines,pageMargin,yPosition);yPosition+=(titleLines.length*(lineHeight-2));pdf.setFont("helvetica","normal");pdf.setFontSize(10);pdf.text(`Dzień: ${schedule.day}, Godzina: ${schedule.time} - ${schedule.endTime}`,pageMargin,yPosition);yPosition+=lineHeight-2;pdf.text(`Prowadzący: ${schedule.instructor}`,pageMargin,yPosition);yPosition+=lineHeight-2;pdf.text(`Grupa: ${schedule.group}`,pageMargin,yPosition);if(schedule.hours){yPosition+=lineHeight-2;pdf.text(`Godziny: ${schedule.hours}h`,pageMargin,yPosition);}
                if(schedule.ects){yPosition+=lineHeight-2;pdf.text(`ECTS: ${schedule.ects}`,pageMargin,yPosition);}
                if(schedule.faculty){yPosition+=lineHeight-2;pdf.text(`Wydział: ${schedule.faculty}`,pageMargin,yPosition);}
                yPosition+=lineHeight*1.5;});pdf.save('harmonogram-zajec.pdf');showMessage('PDF został pobrany!','success');}
            function showSection(sectionId){const sections=[myScheduleSection,readingListSection];const buttons=[showScheduleButton,showReadingListButton];sections.forEach(section=>section&&section.classList.add('d-none'));buttons.forEach(button=>{if(button){button.classList.remove('btn-primary');button.classList.add('btn-outline-primary');}});const targetSection=document.getElementById(sectionId);if(targetSection)targetSection.classList.remove('d-none');const targetButton=document.getElementById(sectionId.replace('-section','-button'));if(targetButton){targetButton.classList.remove('btn-outline-primary');targetButton.classList.add('btn-primary');}}
            if(addMandatoryButton){addMandatoryButton.addEventListener('click',()=>{const mandatoryCourses=["Historia filozofii","Wykłady z historii Polski (966-1795)"];let addedCount=0;mandatoryCourses.forEach(courseTitle=>{const course=availableSchedules.find(s=>s.title===courseTitle);if(course){if(!mySchedules.some(s=>s.title===courseTitle)){addToMySchedule(course,true);addedCount++;}}});if(addedCount>0)showMessage('Dodano obowiązkowe wykłady do planu!','success');else showMessage('Obowiązkowe wykłady już są w Twoim planie.','error');});}
            if(addAllToCalendarButton)addAllToCalendarButton.addEventListener('click',addAllToCalendar);if(generateHtmlButton)generateHtmlButton.addEventListener('click',generateImage);if(generatePdfButton)generatePdfButton.addEventListener('click',generatePdf);if(clearMyPlanButton)clearMyPlanButton.addEventListener('click',clearMyPlan);if(showScheduleButton)showScheduleButton.addEventListener('click',()=>showSection('my-schedule-section'));if(showReadingListButton)showReadingListButton.addEventListener('click',()=>showSection('reading-list-section'));if(modalCancelButton){modalCancelButton.addEventListener('click',()=>{conflictModal.classList.remove('show');pendingConflictSchedule=null;});}
            if(modalReplaceButton){modalReplaceButton.addEventListener('click',()=>{if(pendingConflictSchedule){const conflictingItem=mySchedules.find(existingSchedule=>{if(existingSchedule.day===pendingConflictSchedule.day){const existingStart=timeToMinutes(existingSchedule.time);const existingEnd=timeToMinutes(existingSchedule.endTime);const newStart=timeToMinutes(pendingConflictSchedule.time);const newEnd=timeToMinutes(pendingConflictSchedule.endTime);return(newStart<existingEnd&&newEnd>existingStart);}
                return false;});if(conflictingItem){mySchedules=mySchedules.filter(s=>s.id!==conflictingItem.id);}
                mySchedules.push({...pendingConflictSchedule,id:pendingConflictSchedule.id+'-'+Date.now()});saveMySchedules();renderMy();showMessage('Zajęcie zostało zastąpione!','success');}
                conflictModal.classList.remove('show');pendingConflictSchedule=null;});}
            loadMySchedules();loadAvailableSchedules();renderMy();renderAvailable();showSection('my-schedule-section');updateEctsCounter();});
    </script>
</head>
<body>
<div id="message-box"></div>
<div id="conflict-modal" class="modal-overlay">
    <div class="modal-content">
        <h3>Konflikt harmonogramu</h3>
        <p>Nowe zajęcie koliduje z istniejącym:</p>
        <p><strong>Obecne:</strong> <span id="current-conflict-title"></span></p>
        <p><strong>Nowe:</strong> <span id="new-conflict-title"></span></p>
        <div class="d-flex justify-content-end gap-2 mt-3">
            <button id="modal-cancel" class="btn btn-secondary">Anuluj</button>
            <button id="modal-replace" class="btn btn-primary">Zastąp</button>
        </div>
    </div>
</div>
<div class="container-fluid app-container">
    <div class="d-flex justify-content-center gap-3 mb-4 flex-wrap">
        <button id="show-schedule-button" class="btn btn-primary btn-lg shadow rounded-pill">Harmonogram Zajęć</button>
        <button id="show-reading-list-button" class="btn btn-outline-primary btn-lg shadow rounded-pill">Lista Lektur</button>
    </div>
    <div id="my-schedule-section" class="content-section">
        <h2 class="text-center text-dark mb-4 fs-3 fw-bold">Mój Harmonogram</h2>
        <div id="ects-counter"></div>
        <div class="schedule-grid-container"></div>
        <div class="d-flex justify-content-center gap-3 mt-4 flex-wrap">
            <button id="add-mandatory-button" class="btn btn-info btn-lg shadow rounded-pill">Dodaj obowiązkowe wykłady</button>
            <button id="add-all-to-calendar-button" class="btn btn-primary btn-lg shadow rounded-pill">Dodaj plan do kalendarza</button>
            <button id="generate-html-button" class="btn btn-success btn-lg shadow rounded-pill">Pobierz jako obraz</button>
            <button id="generate-pdf-button" class="btn btn-danger btn-lg shadow rounded-pill">Pobierz jako PDF</button>
            <button id="clear-my-plan-button" class="btn btn-warning btn-lg shadow rounded-pill">Wyczyść plan</button>
        </div>
        <hr class="my-5">
        <h2 class="text-center text-dark mb-4 fs-3 fw-bold">Dostępne Zajęcia</h2>
        <p class="text-center text-secondary mb-4">Kliknij na zajęcie, aby dodać je do swojego planu.</p>
        <div id="available-schedule-display" class="schedule-grid-container"></div>
    </div>
    <div id="reading-list-section" class="content-section d-none">
        <h2 class="text-center text-dark mb-4 fs-3 fw-bold">Lista Lektur</h2>
        <div class="accordion" id="readingListAccordion">
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingSredniowiecze"><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSredniowiecze" aria-expanded="true" aria-controls="collapseSredniowiecze">Średniowiecze</button></h2>
                <div id="collapseSredniowiecze" class="accordion-collapse collapse show" aria-labelledby="headingSredniowiecze" data-bs-parent="#readingListAccordion">
                    <div class="accordion-body">
                        <h4>TEKSTY</h4><h5>LITERATURA POLSKA</h5>
                        <div class="reading-list-item"><div><strong>Księga Psalmów Dawidowych (Psałterz floriański)</strong><small>Psalm 1</small></div></div>
                        <div class="reading-list-item"><div><strong>Legenda o św. Aleksym</strong></div></div>
                        <div class="reading-list-item"><div><strong>Żywot św. Stanisława</strong></div></div>
                        <h5>LITERATURA OBCA</h5>
                        <div class="reading-list-item"><div><strong>Pieśń o Rolandzie (wybór)</strong></div></div>
                        <div class="reading-list-item"><div><strong>Dante: Boska komedia (wybór: Piekło, I-III)</strong></div></div>
                        <h4>PODRĘCZNIK</h4>
                        <div class="reading-list-item"><div><strong>T. MICHAŁOWSKA: Średniowiecze</strong></div></div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingRenesans"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseRenesans" aria-expanded="false" aria-controls="collapseRenesans">Renesans</button></h2>
                <div id="collapseRenesans" class="accordion-collapse collapse" aria-labelledby="headingRenesans" data-bs-parent="#readingListAccordion">
                    <div class="accordion-body">
                        <h4>TEKSTY</h4><h5>LITERATURA POLSKA</h5>
                        <div class="reading-list-item"><div><strong>Kochanowski: Fraszki, Pieśni, Treny</strong></div></div>
                        <div class="reading-list-item"><div><strong>Rej: Żywot człowieka poczciwego (wybór)</strong></div></div>
                        <h5>LITERATURA OBCA</h5>
                        <div class="reading-list-item"><div><strong>Petrarca: Sonety (wybór)</strong></div></div>
                        <div class="reading-list-item"><div><strong>Shakespeare: Romeo i Julia</strong></div></div>
                        <h4>PODRĘCZNIK</h4>
                        <div class="reading-list-item"><div><strong>T. ULEWICZ: Literatura staropolska i jej związki z europejskim kręgiem kulturowym</strong></div></div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingBarok"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseBarok" aria-expanded="false" aria-controls="collapseBarok">Barok</button></h2>
                <div id="collapseBarok" class="accordion-collapse collapse" aria-labelledby="headingBarok" data-bs-parent="#readingListAccordion">
                    <div class="accordion-body">
                        <h4>TEKSTY</h4><h5>LITERATURA POLSKA</h5>
                        <div class="reading-list-item"><div><strong>Antologie i poeci polskiego baroku</strong></div></div>
                        <h5>LITERATURA OBCA</h5>
                        <div class="reading-list-item"><div><strong>T. Tasso, Corneille, Molier (wybór)</strong></div></div>
                        <h4>PODRĘCZNIK</h4>
                        <div class="reading-list-item"><div><strong>C. HERNAS: Literatura baroku</strong></div></div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingOswiecenie"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOswiecenie" aria-expanded="false" aria-controls="collapseOswiecenie">Oświecenie</button></h2>
                <div id="collapseOswiecenie" class="accordion-collapse collapse" aria-labelledby="headingOswiecenie" data-bs-parent="#readingListAccordion">
                    <div class="accordion-body">
                        <h4>TEKSTY</h4><h5>LITERATURA POLSKA</h5>
                        <div class="reading-list-item"><div><strong>Antologie, Krasicki (Monachomachia, Satyry, Bajki…)</strong></div></div>
                        <h5>LITERATURA OBCA</h5>
                        <div class="reading-list-item"><div><strong>Sterne, Diderot, Voltaire, Rousseau (wybór)</strong></div></div>
                        <h4>PODRĘCZNIKI</h4>
                        <div class="reading-list-item"><div><strong>M. KLIMOWICZ: Literatura Oświecenia</strong></div></div>
                        <div class="reading-list-item"><div><strong>R. PRZYBYLSKI: Klasycyzm… (cz. 2)</strong></div></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>

